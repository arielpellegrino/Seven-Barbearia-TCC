{"ast":null,"code":"import _defineProperty from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import moment from'moment';import{updateServico,addServico,saveServico,allServicos,removeArquivo,resetServico,removeServico}from'../../store/modules/servico/actions';import util from'../../services/util';import{DatePicker,Drawer,Nav,Badge,Uploader,Icon,Button,Notification,Tag,Modal}from'rsuite';import'rsuite/dist/styles/rsuite-default.css';import Table from'../../components/Table';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ServicosProdutos=function ServicosProdutos(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.servico;}),servico=_useSelector.servico,servicos=_useSelector.servicos,form=_useSelector.form,components=_useSelector.components,behavior=_useSelector.behavior;var setServico=function setServico(key,value){dispatch(updateServico({servico:_objectSpread(_objectSpread({},servico),{},_defineProperty({},key,value))}));};var setComponents=function setComponents(component,state){dispatch(updateServico({components:_objectSpread(_objectSpread({},components),{},_defineProperty({},component,state))}));};var save=function save(){if(!util.allFields(servico,['titulo','preco','comissao','duracao','descricao','status','arquivos'])){// DISPARAR O ALERTA\nNotification.error({placement:'topStart',title:'Calma lá!',description:'Antes de prosseguir, preencha todos os campos!'});return false;}if(behavior==='create'){dispatch(addServico());}else{dispatch(saveServico());}};var edit=function edit(servico){dispatch(updateServico({servico:servico,behavior:'update'}));setComponents('drawer',true);};var remove=function remove(servicoId){// PERFORM REMOVE\ndispatch(removeServico(servicoId));};useEffect(function(){dispatch(allServicos());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"col p-5 overflow-auto h-100\",children:[/*#__PURE__*/_jsx(Drawer,{show:components.drawer,size:\"sm\",onHide:function onHide(){return setComponents('drawer',false);},children:/*#__PURE__*/_jsxs(Drawer.Body,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[behavior==='create'?'Criar':'Atualizar',\" servi\\xE7o\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-6\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Titulo do servi\\xE7o\",value:servico.titulo,onChange:function onChange(e){setServico('titulo',e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-3\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"R$ Pre\\xE7o\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Pre\\xE7o do servi\\xE7o\",value:servico.preco,onChange:function onChange(e){return setServico('preco',e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-3\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"Recorr. (dias)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Recorr\\xEAncia do servi\\xE7o\",value:servico.recorrencia,onChange:function onChange(e){return setServico('recorrencia',e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-4\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"% Comiss\\xE3o\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Comiss\\xE3o do servi\\xE7o\",value:servico.comissao,onChange:function onChange(e){return setServico('comissao',e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-4\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"d-block\",children:\"Dura\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(DatePicker,{block:true,format:\"HH:mm\",value:servico.duracao,hideMinutes:function hideMinutes(min){return![0,30].includes(min);},onChange:function onChange(e){setServico('duracao',e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-4\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:servico.status,onChange:function onChange(e){return setServico('status',e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"A\",children:\"Ativo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"I\",children:\"Inativo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-12\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"\",children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"5\",className:\"form-control\",placeholder:\"Descri\\xE7\\xE3o do servi\\xE7o...\",value:servico.descricao,onChange:function onChange(e){return setServico('descricao',e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-12\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"d-block\",children:\"Imagens do servi\\xE7o\"}),/*#__PURE__*/_jsx(Uploader,{multiple:true,autoUpload:false,listType:\"picture\",defaultFileList:servico.arquivos.map(function(s,i){return{name:s===null||s===void 0?void 0:s.caminho,fileKey:i,url:\"\".concat(util.AWS.bucketURL,\"/\").concat(s===null||s===void 0?void 0:s.caminho)};}),onChange:function onChange(files){var arquivos=files.filter(function(f){return f.blobFile;}).map(function(f){return f.blobFile;});setServico('arquivos',arquivos);},onRemove:function onRemove(file){if(behavior==='update'&&file.url){dispatch(removeArquivo(file.name));}},children:/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Icon,{icon:\"camera-retro\",size:\"lg\"})})})]})]}),/*#__PURE__*/_jsx(Button,{loading:form.saving,color:behavior==='create'?'green':'primary',size:\"lg\",block:true,onClick:function onClick(){return save();},className:\"mt-3\",children:\"Salvar Servi\\xE7o\"}),behavior==='update'&&/*#__PURE__*/_jsx(Button,{loading:form.saving,color:\"red\",size:\"lg\",block:true,onClick:function onClick(){return setComponents('confirmDelete',true);},className:\"mt-1\",children:\"Remover Servi\\xE7o\"})]})}),/*#__PURE__*/_jsxs(Modal,{show:components.confirmDelete,onHide:function onHide(){return setComponents('confirmDelete',false);},size:\"xs\",children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Icon,{icon:\"remind\",style:{color:'#ffb300',fontSize:24}}),'  ',\" Tem certeza que deseja excluir? Essa a\\xE7\\xE3o ser\\xE1 irrevers\\xEDvel!\"]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{loading:form.saving,onClick:function onClick(){return remove();},color:\"red\",children:\"Sim, tenho certeza!\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setComponents('confirmDelete',false);},appearance:\"subtle\",children:\"Cancelar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4 mt-0\",children:\"Servi\\xE7os e Produtos\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){dispatch(updateServico({behavior:'create'}));dispatch(resetServico());setComponents('drawer',true);},className:\"btn btn-primary btn-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mdi mdi-plus\"}),\" Novo Servi\\xE7o\"]})})]}),/*#__PURE__*/_jsx(Table,{rows:servicos,loading:form.filtering,config:[{label:'Titulo',key:'titulo',sortable:true,fixed:true,width:200},{label:'R$ Preço',key:'preco',content:function content(preco){return\"R$ \".concat(preco.toFixed(2));},sortable:true},{label:'% Comissão',key:'comissao',content:function content(comissao){return\"\".concat(comissao,\"%\");},sortable:true},{label:'Recorrência (dias)',key:'recorrencia',content:function content(comissao){return\"\".concat(comissao,\" dias\");},sortable:true},{label:'Duração',key:'duracao',sortable:true,content:function content(duracao){return moment(duracao).format('HH:mm');}},{label:'Data de Cadastro',key:'dataCadastro',sortable:true},{label:'Status',key:'status',content:function content(status){return/*#__PURE__*/_jsx(Tag,{color:status==='A'?'green':'red',children:status==='A'?'Ativo':'Inativo'});},sortable:true},{label:'Data de cadastro',key:'dataCadastro',sortable:true,width:200}],actions:function actions(item){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{color:\"blue\",size:\"xs\",onClick:function onClick(){edit(item);},children:/*#__PURE__*/_jsx(\"span\",{class:\"mdi mdi-pencil\"})}),/*#__PURE__*/_jsx(Button,{color:\"red\",size:\"xs\",className:\"ml-2\",onClick:function onClick(){dispatch(updateServico({servico:item}));setComponents('confirmDelete',true);},children:/*#__PURE__*/_jsx(\"span\",{class:\"mdi mdi-trash-can\"})})]});},onRowClick:function onRowClick(){}})]})})]});};export default ServicosProdutos;","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/pages/ServicosProdutos/index.js"],"names":["useEffect","useDispatch","useSelector","moment","updateServico","addServico","saveServico","allServicos","removeArquivo","resetServico","removeServico","util","DatePicker","Drawer","Nav","Badge","Uploader","Icon","Button","Notification","Tag","Modal","Table","ServicosProdutos","dispatch","state","servico","servicos","form","components","behavior","setServico","key","value","setComponents","component","save","allFields","error","placement","title","description","edit","remove","servicoId","drawer","titulo","e","target","preco","recorrencia","comissao","duracao","min","includes","status","descricao","arquivos","map","s","i","name","caminho","fileKey","url","AWS","bucketURL","files","filter","f","blobFile","file","saving","confirmDelete","color","fontSize","filtering","label","sortable","fixed","width","content","toFixed","format","item"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\n\nimport {\n  updateServico,\n  addServico,\n  saveServico,\n  allServicos,\n  removeArquivo,\n  resetServico,\n  removeServico,\n} from '../../store/modules/servico/actions';\nimport util from '../../services/util';\n\nimport {\n  DatePicker,\n  Drawer,\n  Nav,\n  Badge,\n  Uploader,\n  Icon,\n  Button,\n  Notification,\n  Tag,\n  Modal,\n} from 'rsuite';\nimport 'rsuite/dist/styles/rsuite-default.css';\n\nimport Table from '../../components/Table';\n\nconst ServicosProdutos = () => {\n  const dispatch = useDispatch();\n  const { servico, servicos, form, components, behavior } = useSelector(\n    (state) => state.servico\n  );\n\n  const setServico = (key, value) => {\n    dispatch(\n      updateServico({\n        servico: { ...servico, [key]: value },\n      })\n    );\n  };\n\n  const setComponents = (component, state) => {\n    dispatch(\n      updateServico({\n        components: { ...components, [component]: state },\n      })\n    );\n  };\n\n  const save = () => {\n    if (\n      !util.allFields(servico, [\n        'titulo',\n        'preco',\n        'comissao',\n        'duracao',\n        'descricao',\n        'status',\n        'arquivos',\n      ])\n    ) {\n      // DISPARAR O ALERTA\n      Notification.error({\n        placement: 'topStart',\n        title: 'Calma lá!',\n        description: 'Antes de prosseguir, preencha todos os campos!',\n      });\n      return false;\n    }\n\n    if (behavior === 'create') {\n      dispatch(addServico());\n    } else {\n      dispatch(saveServico());\n    }\n  };\n\n  const edit = (servico) => {\n    dispatch(\n      updateServico({\n        servico,\n        behavior: 'update',\n      })\n    );\n\n    setComponents('drawer', true);\n  };\n\n  const remove = (servicoId) => {\n    // PERFORM REMOVE\n    dispatch(removeServico(servicoId));\n  };\n\n  useEffect(() => {\n    dispatch(allServicos());\n  }, []);\n\n  return (\n    <div className=\"col p-5 overflow-auto h-100\">\n      <Drawer\n        show={components.drawer}\n        size=\"sm\"\n        onHide={() => setComponents('drawer', false)}\n      >\n        <Drawer.Body>\n          <h3>{behavior === 'create' ? 'Criar' : 'Atualizar'} serviço</h3>\n          <div className=\"row mt-3\">\n            <div className=\"form-group col-6\">\n              <b className=\"\">Título</b>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder=\"Titulo do serviço\"\n                value={servico.titulo}\n                onChange={(e) => {\n                  setServico('titulo', e.target.value);\n                }}\n              />\n            </div>\n            <div className=\"form-group col-3\">\n              <b className=\"\">R$ Preço</b>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                placeholder=\"Preço do serviço\"\n                value={servico.preco}\n                onChange={(e) => setServico('preco', e.target.value)}\n              />\n            </div>\n            <div className=\"form-group col-3\">\n              <b className=\"\">Recorr. (dias)</b>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                placeholder=\"Recorrência do serviço\"\n                value={servico.recorrencia}\n                onChange={(e) => setServico('recorrencia', e.target.value)}\n              />\n            </div>\n            <div className=\"form-group col-4\">\n              <b className=\"\">% Comissão</b>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                placeholder=\"Comissão do serviço\"\n                value={servico.comissao}\n                onChange={(e) => setServico('comissao', e.target.value)}\n              />\n            </div>\n            <div className=\"form-group col-4\">\n              <b className=\"d-block\">Duração</b>\n              <DatePicker\n                block\n                format=\"HH:mm\"\n                value={servico.duracao}\n                hideMinutes={(min) => ![0, 30].includes(min)}\n                onChange={(e) => {\n                  setServico('duracao', e);\n                }}\n              />\n            </div>\n            <div className=\"form-group col-4\">\n              <b className=\"\">Status</b>\n              <select\n                className=\"form-control\"\n                value={servico.status}\n                onChange={(e) => setServico('status', e.target.value)}\n              >\n                <option value=\"A\">Ativo</option>\n                <option value=\"I\">Inativo</option>\n              </select>\n            </div>\n\n            <div className=\"form-group col-12\">\n              <b className=\"\">Descrição</b>\n              <textarea\n                rows=\"5\"\n                className=\"form-control\"\n                placeholder=\"Descrição do serviço...\"\n                value={servico.descricao}\n                onChange={(e) => setServico('descricao', e.target.value)}\n              ></textarea>\n            </div>\n\n            <div className=\"form-group col-12\">\n              <b className=\"d-block\">Imagens do serviço</b>\n              <Uploader\n                multiple\n                autoUpload={false}\n                listType=\"picture\"\n                defaultFileList={servico.arquivos.map((s, i) => ({\n                  name: s?.caminho,\n                  fileKey: i,\n                  url: `${util.AWS.bucketURL}/${s?.caminho}`,\n                }))}\n                onChange={(files) => {\n                  const arquivos = files\n                    .filter((f) => f.blobFile)\n                    .map((f) => f.blobFile);\n\n                  setServico('arquivos', arquivos);\n                }}\n                onRemove={(file) => {\n                  if (behavior === 'update' && file.url) {\n                    dispatch(removeArquivo(file.name));\n                  }\n                }}\n              >\n                <button>\n                  <Icon icon=\"camera-retro\" size=\"lg\" />\n                </button>\n              </Uploader>\n            </div>\n          </div>\n          <Button\n            loading={form.saving}\n            color={behavior === 'create' ? 'green' : 'primary'}\n            size=\"lg\"\n            block\n            onClick={() => save()}\n            className=\"mt-3\"\n          >\n            Salvar Serviço\n          </Button>\n          {behavior === 'update' && (\n            <Button\n              loading={form.saving}\n              color=\"red\"\n              size=\"lg\"\n              block\n              onClick={() => setComponents('confirmDelete', true)}\n              className=\"mt-1\"\n            >\n              Remover Serviço\n            </Button>\n          )}\n        </Drawer.Body>\n      </Drawer>\n\n      <Modal\n        show={components.confirmDelete}\n        onHide={() => setComponents('confirmDelete', false)}\n        size=\"xs\"\n      >\n        <Modal.Body>\n          <Icon\n            icon=\"remind\"\n            style={{\n              color: '#ffb300',\n              fontSize: 24,\n            }}\n          />\n          {'  '} Tem certeza que deseja excluir? Essa ação será irreversível!\n        </Modal.Body>\n        <Modal.Footer>\n          <Button loading={form.saving} onClick={() => remove()} color=\"red\">\n            Sim, tenho certeza!\n          </Button>\n          <Button\n            onClick={() => setComponents('confirmDelete', false)}\n            appearance=\"subtle\"\n          >\n            Cancelar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"w-100 d-flex justify-content-between\">\n            <h2 className=\"mb-4 mt-0\">Serviços e Produtos</h2>\n            <div>\n              <button\n                onClick={() => {\n                  dispatch(\n                    updateServico({\n                      behavior: 'create',\n                    })\n                  );\n                  dispatch(resetServico());\n                  setComponents('drawer', true);\n                }}\n                className=\"btn btn-primary btn-lg\"\n              >\n                <span className=\"mdi mdi-plus\"></span> Novo Serviço\n              </button>\n            </div>\n          </div>\n\n          <Table\n            rows={servicos}\n            loading={form.filtering}\n            config={[\n              {\n                label: 'Titulo',\n                key: 'titulo',\n                sortable: true,\n                fixed: true,\n                width: 200,\n              },\n              {\n                label: 'R$ Preço',\n                key: 'preco',\n                content: (preco) => `R$ ${preco.toFixed(2)}`,\n                sortable: true,\n              },\n              {\n                label: '% Comissão',\n                key: 'comissao',\n                content: (comissao) => `${comissao}%`,\n                sortable: true,\n              },\n              {\n                label: 'Recorrência (dias)',\n                key: 'recorrencia',\n                content: (comissao) => `${comissao} dias`,\n                sortable: true,\n              },\n              {\n                label: 'Duração',\n                key: 'duracao',\n                sortable: true,\n                content: (duracao) => moment(duracao).format('HH:mm'),\n              },\n              {\n                label: 'Data de Cadastro',\n                key: 'dataCadastro',\n                sortable: true,\n              },\n              {\n                label: 'Status',\n                key: 'status',\n                content: (status) => (\n                  <Tag color={status === 'A' ? 'green' : 'red'}>\n                    {status === 'A' ? 'Ativo' : 'Inativo'}\n                  </Tag>\n                ),\n                sortable: true,\n              },\n              {\n                label: 'Data de cadastro',\n                key: 'dataCadastro',\n                sortable: true,\n                width: 200,\n              },\n            ]}\n            actions={(item) => (\n              <>\n                <Button\n                  color=\"blue\"\n                  size=\"xs\"\n                  onClick={() => {\n                    edit(item);\n                  }}\n                >\n                  <span class=\"mdi mdi-pencil\"></span>\n                </Button>\n                <Button\n                  color=\"red\"\n                  size=\"xs\"\n                  className=\"ml-2\"\n                  onClick={() => {\n                    dispatch(\n                      updateServico({\n                        servico: item,\n                      })\n                    );\n                    setComponents('confirmDelete', true);\n                  }}\n                >\n                  <span class=\"mdi mdi-trash-can\"></span>\n                </Button>\n              </>\n            )}\n            onRowClick={() => {}}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ServicosProdutos;\n"]},"metadata":{},"sourceType":"module"}