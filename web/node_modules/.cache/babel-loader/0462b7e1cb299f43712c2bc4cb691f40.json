{"ast":null,"code":"import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport types from './types';\nimport { updateServico, resetServico, allServicos as allServicosAction } from './actions';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\nimport consts from '../../../consts';\nexport function* addServico() {\n  const {\n    servico,\n    form,\n    components\n  } = yield select(state => state.servico);\n\n  try {\n    yield put(updateServico({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n    const {\n      data: res\n    } = yield call(api.post, '/servico', formData);\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetServico());\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!'\n    });\n  } catch (err) {\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* allServicos() {\n  const {\n    form\n  } = yield select(state => state.servico);\n\n  try {\n    yield put(updateServico({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.get, `/servico/salao/609310a1002ab333d1ae1716`);\n    yield put(updateServico({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateServico({\n      servicos: res.servicos\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* removeArquivo(payload) {\n  const {\n    form\n  } = yield select(state => state.servico);\n\n  try {\n    yield put(updateServico({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.post, `/servico/remove-arquivo/`, {\n      arquivo: payload.arquivo\n    });\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n  } catch (err) {\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* saveServico() {\n  const {\n    servico,\n    form,\n    components\n  } = yield select(state => state.servico);\n\n  try {\n    yield put(updateServico({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n    const {\n      data: res\n    } = yield call(api.put, `/servico/${servico._id}`, formData);\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetServico());\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!'\n    });\n  } catch (err) {\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* removeServico() {\n  const {\n    servico,\n    form,\n    components\n  } = yield select(state => state.servico);\n\n  try {\n    yield put(updateServico({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.delete, `/servico/${servico._id}`);\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({\n      components: { ...components,\n        drawer: false,\n        confirmDelete: false\n      }\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport default all([takeLatest(types.ADD_SERVICO, addServico), takeLatest(types.ALL_SERVICOS, allServicos), takeLatest(types.REMOVE_ARQUIVO, removeArquivo), takeLatest(types.SAVE_SERVICO, saveServico), takeLatest(types.REMOVE_SERVICO, removeServico)]);","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/store/modules/servico/sagas.js"],"names":["takeLatest","all","call","put","select","types","updateServico","resetServico","allServicos","allServicosAction","api","notification","consts","addServico","servico","form","components","state","saving","formData","FormData","append","JSON","stringify","salaoId","arquivos","map","a","i","data","res","post","error","placement","title","description","message","drawer","err","filtering","get","servicos","removeArquivo","payload","arquivo","saveServico","_id","removeServico","delete","confirmDelete","ADD_SERVICO","ALL_SERVICOS","REMOVE_ARQUIVO","SAVE_SERVICO","REMOVE_SERVICO"],"mappings":"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","sourcesContent":["import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport types from './types';\nimport {\n  updateServico,\n  resetServico,\n  allServicos as allServicosAction,\n} from './actions';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\n\nimport consts from '../../../consts';\n\nexport function* addServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n\n    const { data: res } = yield call(api.post, '/servico', formData);\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({ components: { ...components, drawer: false } }));\n    yield put(resetServico());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!',\n    });\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allServicos() {\n  const { form } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/servico/salao/609310a1002ab333d1ae1716`\n    );\n    yield put(updateServico({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateServico({ servicos: res.servicos }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* removeArquivo(payload) {\n  const { form } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n    const { data: res } = yield call(api.post, `/servico/remove-arquivo/`, {\n      arquivo: payload.arquivo,\n    });\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* saveServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n\n    const { data: res } = yield call(\n      api.put,\n      `/servico/${servico._id}`,\n      formData\n    );\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({ components: { ...components, drawer: false } }));\n    yield put(resetServico());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!',\n    });\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* removeServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.delete, `/servico/${servico._id}`);\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(\n      updateServico({\n        components: { ...components, drawer: false, confirmDelete: false },\n      })\n    );\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport default all([\n  takeLatest(types.ADD_SERVICO, addServico),\n  takeLatest(types.ALL_SERVICOS, allServicos),\n  takeLatest(types.REMOVE_ARQUIVO, removeArquivo),\n  takeLatest(types.SAVE_SERVICO, saveServico),\n  takeLatest(types.REMOVE_SERVICO, removeServico),\n]);\n"]},"metadata":{},"sourceType":"module"}