{"ast":null,"code":"import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport { updateHorario, resetHorario, allHorarios as allHorariosAction } from './actions';\nimport types from './types';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\nexport function* addHorario() {\n  try {\n    const {\n      horario,\n      form,\n      components\n    } = yield select(state => state.horario);\n    yield put(updateHorario({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.post, '/horario', { ...horario,\n      salaoId: '609310a1002ab333d1ae1716'\n    });\n    yield put(updateHorario({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(updateHorario({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetHorario());\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Horário salvo com sucesso!'\n    });\n  } catch (err) {\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* allHorarios() {\n  const {\n    form\n  } = yield select(state => state.horario);\n\n  try {\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.get, `/horario/salao/609310a1002ab333d1ae1716`);\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateHorario({\n      horarios: res.horarios\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* saveHorario() {\n  const {\n    horario,\n    form,\n    components\n  } = yield select(state => state.horario);\n\n  try {\n    yield put(updateHorario({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.put, `/horario/${horario._id}`, horario);\n    yield put(updateHorario({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(updateHorario({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetHorario());\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!'\n    });\n  } catch (err) {\n    yield put(updateHorario({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* removeHorario() {\n  const {\n    horario,\n    form,\n    components\n  } = yield select(state => state.horario);\n\n  try {\n    yield put(updateHorario({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.delete, `/horario/${horario._id}`);\n    yield put(updateHorario({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(updateHorario({\n      components: { ...components,\n        drawer: false,\n        confirmDelete: false\n      }\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* allServicos() {\n  const {\n    form\n  } = yield select(state => state.horario);\n\n  try {\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.get, `/salao/servicos/609310a1002ab333d1ae1716`);\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateHorario({\n      servicos: res.servicos\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* filterColaboradores() {\n  const {\n    form,\n    horario\n  } = yield select(state => state.horario);\n\n  try {\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.post, `/horario/colaboradores/`, {\n      servicos: horario.especialidades\n    });\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateHorario({\n      colaboradores: res.colaboradores\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport default all([takeLatest(types.ADD_HORARIO, addHorario), takeLatest(types.ALL_HORARIOS, allHorarios), takeLatest(types.REMOVE_HORARIO, removeHorario), takeLatest(types.SAVE_HORARIO, saveHorario), takeLatest(types.ALL_SERVICOS, allServicos), takeLatest(types.FILTER_COLABORADORES, filterColaboradores)]);","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/store/modules/horario/sagas.js"],"names":["takeLatest","all","call","put","select","updateHorario","resetHorario","allHorarios","allHorariosAction","types","api","notification","addHorario","horario","form","components","state","saving","data","res","post","salaoId","error","placement","title","description","message","drawer","err","filtering","get","horarios","saveHorario","_id","removeHorario","delete","confirmDelete","allServicos","servicos","filterColaboradores","especialidades","colaboradores","ADD_HORARIO","ALL_HORARIOS","REMOVE_HORARIO","SAVE_HORARIO","ALL_SERVICOS","FILTER_COLABORADORES"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgCC,GAAhC,EAAqCC,MAArC,QAAmD,oBAAnD;AACA,SACEC,aADF,EAEEC,YAFF,EAGEC,WAAW,IAAIC,iBAHjB,QAIO,WAJP;AAKA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,YAAT,QAA6B,0BAA7B;AAEA,OAAO,UAAUC,UAAV,GAAuB;AAC5B,MAAI;AACF,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,IAAX;AAAiBC,MAAAA;AAAjB,QAAgC,MAAMX,MAAM,CAC/CY,KAAD,IAAWA,KAAK,CAACH,OAD+B,CAAlD;AAGA,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAACQ,GAAG,CAACU,IAAL,EAAW,UAAX,EAAuB,EACrD,GAAGP,OADkD;AAErDQ,MAAAA,OAAO,EAAE;AAF4C,KAAvB,CAAhC;AAIA,UAAMlB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIE,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACK,iBAAiB,EAAlB,CAAT;AACA,UAAML,GAAG,CAACE,aAAa,CAAC;AAAEU,MAAAA,UAAU,EAAE,EAAE,GAAGA,UAAL;AAAiBY,QAAAA,MAAM,EAAE;AAAzB;AAAd,KAAD,CAAd,CAAT;AACA,UAAMxB,GAAG,CAACG,YAAY,EAAb,CAAT;AAEAK,IAAAA,YAAY,CAAC,SAAD,EAAY;AACtBY,MAAAA,SAAS,EAAE,UADW;AAEtBC,MAAAA,KAAK,EAAE,YAFe;AAGtBC,MAAAA,WAAW,EAAE;AAHS,KAAZ,CAAZ;AAKD,GA/BD,CA+BE,OAAOG,GAAP,EAAY;AACZjB,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,OAAO,UAAUnB,WAAV,GAAwB;AAC7B,QAAM;AAAEO,IAAAA;AAAF,MAAW,MAAMV,MAAM,CAAEY,KAAD,IAAWA,KAAK,CAACH,OAAlB,CAA7B;;AAEA,MAAI;AACF,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEX,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAC9BQ,GAAG,CAACoB,GAD0B,EAE7B,yCAF6B,CAAhC;AAIA,UAAM3B,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIV,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACE,aAAa,CAAC;AAAE0B,MAAAA,QAAQ,EAAEZ,GAAG,CAACY;AAAhB,KAAD,CAAd,CAAT;AACD,GApBD,CAoBE,OAAOH,GAAP,EAAY;AACZ;AACA,UAAMzB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AACAlB,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,OAAO,UAAUM,WAAV,GAAwB;AAC7B,QAAM;AAAEnB,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA;AAAjB,MAAgC,MAAMX,MAAM,CAAEY,KAAD,IAAWA,KAAK,CAACH,OAAlB,CAAlD;;AAEA,MAAI;AACF,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAC9BQ,GAAG,CAACP,GAD0B,EAE7B,YAAWU,OAAO,CAACoB,GAAI,EAFM,EAG9BpB,OAH8B,CAAhC;AAKA,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIE,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACK,iBAAiB,EAAlB,CAAT;AACA,UAAML,GAAG,CAACE,aAAa,CAAC;AAAEU,MAAAA,UAAU,EAAE,EAAE,GAAGA,UAAL;AAAiBY,QAAAA,MAAM,EAAE;AAAzB;AAAd,KAAD,CAAd,CAAT;AACA,UAAMxB,GAAG,CAACG,YAAY,EAAb,CAAT;AAEAK,IAAAA,YAAY,CAAC,SAAD,EAAY;AACtBY,MAAAA,SAAS,EAAE,UADW;AAEtBC,MAAAA,KAAK,EAAE,YAFe;AAGtBC,MAAAA,WAAW,EAAE;AAHS,KAAZ,CAAZ;AAKD,GA7BD,CA6BE,OAAOG,GAAP,EAAY;AACZ,UAAMzB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;AACAN,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,OAAO,UAAUQ,aAAV,GAA0B;AAC/B,QAAM;AAAErB,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA;AAAjB,MAAgC,MAAMX,MAAM,CAAEY,KAAD,IAAWA,KAAK,CAACH,OAAlB,CAAlD;;AAEA,MAAI;AACF,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAACQ,GAAG,CAACyB,MAAL,EAAc,YAAWtB,OAAO,CAACoB,GAAI,EAArC,CAAhC;AACA,UAAM9B,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIE,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACK,iBAAiB,EAAlB,CAAT;AACA,UAAML,GAAG,CACPE,aAAa,CAAC;AACZU,MAAAA,UAAU,EAAE,EAAE,GAAGA,UAAL;AAAiBY,QAAAA,MAAM,EAAE,KAAzB;AAAgCS,QAAAA,aAAa,EAAE;AAA/C;AADA,KAAD,CADN,CAAT;AAKD,GAtBD,CAsBE,OAAOR,GAAP,EAAY;AACZ;AACA,UAAMzB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWG,QAAAA,MAAM,EAAE;AAAnB;AAAR,KAAD,CAAd,CAAT;AACAN,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,OAAO,UAAUW,WAAV,GAAwB;AAC7B,QAAM;AAAEvB,IAAAA;AAAF,MAAW,MAAMV,MAAM,CAAEY,KAAD,IAAWA,KAAK,CAACH,OAAlB,CAA7B;;AAEA,MAAI;AACF,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEX,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAC9BQ,GAAG,CAACoB,GAD0B,EAE7B,0CAF6B,CAAhC;AAIA,UAAM3B,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIV,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACE,aAAa,CAAC;AAAEiC,MAAAA,QAAQ,EAAEnB,GAAG,CAACmB;AAAhB,KAAD,CAAd,CAAT;AACD,GApBD,CAoBE,OAAOV,GAAP,EAAY;AACZ;AACA,UAAMzB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AACAlB,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,OAAO,UAAUa,mBAAV,GAAgC;AACrC,QAAM;AAAEzB,IAAAA,IAAF;AAAQD,IAAAA;AAAR,MAAoB,MAAMT,MAAM,CAAEY,KAAD,IAAWA,KAAK,CAACH,OAAlB,CAAtC;;AAEA,MAAI;AACF,UAAMV,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AAEA,UAAM;AAAEX,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMjB,IAAI,CAACQ,GAAG,CAACU,IAAL,EAAY,yBAAZ,EAAsC;AACpEkB,MAAAA,QAAQ,EAAEzB,OAAO,CAAC2B;AADkD,KAAtC,CAAhC;AAGA,UAAMrC,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;;AAEA,QAAIV,GAAG,CAACG,KAAR,EAAe;AACb;AACAX,MAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,QAAAA,SAAS,EAAE,UADS;AAEpBC,QAAAA,KAAK,EAAE,QAFa;AAGpBC,QAAAA,WAAW,EAAEN,GAAG,CAACO;AAHG,OAAV,CAAZ;AAKA,aAAO,KAAP;AACD;;AAED,UAAMvB,GAAG,CAACE,aAAa,CAAC;AAAEoC,MAAAA,aAAa,EAAEtB,GAAG,CAACsB;AAArB,KAAD,CAAd,CAAT;AACD,GAnBD,CAmBE,OAAOb,GAAP,EAAY;AACZ;AACA,UAAMzB,GAAG,CAACE,aAAa,CAAC;AAAES,MAAAA,IAAI,EAAE,EAAE,GAAGA,IAAL;AAAWe,QAAAA,SAAS,EAAE;AAAtB;AAAR,KAAD,CAAd,CAAT;AACAlB,IAAAA,YAAY,CAAC,OAAD,EAAU;AACpBY,MAAAA,SAAS,EAAE,UADS;AAEpBC,MAAAA,KAAK,EAAE,QAFa;AAGpBC,MAAAA,WAAW,EAAEG,GAAG,CAACF;AAHG,KAAV,CAAZ;AAKD;AACF;AAED,eAAezB,GAAG,CAAC,CACjBD,UAAU,CAACS,KAAK,CAACiC,WAAP,EAAoB9B,UAApB,CADO,EAEjBZ,UAAU,CAACS,KAAK,CAACkC,YAAP,EAAqBpC,WAArB,CAFO,EAGjBP,UAAU,CAACS,KAAK,CAACmC,cAAP,EAAuBV,aAAvB,CAHO,EAIjBlC,UAAU,CAACS,KAAK,CAACoC,YAAP,EAAqBb,WAArB,CAJO,EAKjBhC,UAAU,CAACS,KAAK,CAACqC,YAAP,EAAqBT,WAArB,CALO,EAMjBrC,UAAU,CAACS,KAAK,CAACsC,oBAAP,EAA6BR,mBAA7B,CANO,CAAD,CAAlB","sourcesContent":["import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport {\n  updateHorario,\n  resetHorario,\n  allHorarios as allHorariosAction,\n} from './actions';\nimport types from './types';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\n\nexport function* addHorario() {\n  try {\n    const { horario, form, components } = yield select(\n      (state) => state.horario\n    );\n    yield put(updateHorario({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.post, '/horario', {\n      ...horario,\n      salaoId: '609310a1002ab333d1ae1716',\n    });\n    yield put(updateHorario({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(updateHorario({ components: { ...components, drawer: false } }));\n    yield put(resetHorario());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Horário salvo com sucesso!',\n    });\n  } catch (err) {\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allHorarios() {\n  const { form } = yield select((state) => state.horario);\n\n  try {\n    yield put(updateHorario({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/horario/salao/609310a1002ab333d1ae1716`\n    );\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateHorario({ horarios: res.horarios }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* saveHorario() {\n  const { horario, form, components } = yield select((state) => state.horario);\n\n  try {\n    yield put(updateHorario({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(\n      api.put,\n      `/horario/${horario._id}`,\n      horario\n    );\n    yield put(updateHorario({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(updateHorario({ components: { ...components, drawer: false } }));\n    yield put(resetHorario());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!',\n    });\n  } catch (err) {\n    yield put(updateHorario({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* removeHorario() {\n  const { horario, form, components } = yield select((state) => state.horario);\n\n  try {\n    yield put(updateHorario({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.delete, `/horario/${horario._id}`);\n    yield put(updateHorario({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allHorariosAction());\n    yield put(\n      updateHorario({\n        components: { ...components, drawer: false, confirmDelete: false },\n      })\n    );\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allServicos() {\n  const { form } = yield select((state) => state.horario);\n\n  try {\n    yield put(updateHorario({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/salao/servicos/609310a1002ab333d1ae1716`\n    );\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateHorario({ servicos: res.servicos }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* filterColaboradores() {\n  const { form, horario } = yield select((state) => state.horario);\n\n  try {\n    yield put(updateHorario({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(api.post, `/horario/colaboradores/`, {\n      servicos: horario.especialidades,\n    });\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateHorario({ colaboradores: res.colaboradores }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateHorario({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport default all([\n  takeLatest(types.ADD_HORARIO, addHorario),\n  takeLatest(types.ALL_HORARIOS, allHorarios),\n  takeLatest(types.REMOVE_HORARIO, removeHorario),\n  takeLatest(types.SAVE_HORARIO, saveHorario),\n  takeLatest(types.ALL_SERVICOS, allServicos),\n  takeLatest(types.FILTER_COLABORADORES, filterColaboradores),\n]);\n"]},"metadata":{},"sourceType":"module"}