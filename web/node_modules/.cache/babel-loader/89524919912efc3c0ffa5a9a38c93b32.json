{"ast":null,"code":"import _regeneratorRuntime from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(filterColaborador),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(addColaborador),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(allColaboradores),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(unlinkColaborador),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(allServicos),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(saveColaborador);import{takeLatest,all,call,put,select}from'redux-saga/effects';import{updateColaborador,resetColaborador,allColaboradores as allColaboradoresAction}from'./actions';import types from'./types';import api from'../../../services/api';import{notification}from'../../../services/rsuite';import consts from'../../../consts';export function filterColaborador(_ref){var filters,_yield$select,form,_yield$call,res;return _regeneratorRuntime.wrap(function filterColaborador$(_context){while(1){switch(_context.prev=_context.next){case 0:filters=_ref.filters;_context.next=3;return select(function(state){return state.colaborador;});case 3:_yield$select=_context.sent;form=_yield$select.form;_context.prev=5;_context.next=8;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:true})}));case 8:_context.next=10;return call(api.post,'/colaborador/filter',filters);case 10:_yield$call=_context.sent;res=_yield$call.data;_context.next=14;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 14:if(!res.error){_context.next=17;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context.abrupt(\"return\",false);case 17:if(!(res.colaboradores.length>0)){_context.next=22;break;}_context.next=20;return put(updateColaborador({colaborador:res.colaboradores[0],form:_objectSpread(_objectSpread({},form),{},{filtering:false,disabled:true})}));case 20:_context.next=24;break;case 22:_context.next=24;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false,disabled:false})}));case 24:console.log(res.colaboradores);_context.next=32;break;case 27:_context.prev=27;_context.t0=_context[\"catch\"](5);_context.next=31;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 31:notification('error',{placement:'topStart',title:'Ops...',description:_context.t0.message});case 32:case\"end\":return _context.stop();}}},_marked,null,[[5,27]]);}export function addColaborador(){var _yield$select2,colaborador,form,components,_yield$call2,res;return _regeneratorRuntime.wrap(function addColaborador$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return select(function(state){return state.colaborador;});case 3:_yield$select2=_context2.sent;colaborador=_yield$select2.colaborador;form=_yield$select2.form;components=_yield$select2.components;_context2.next=9;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 9:_context2.next=11;return call(api.post,'/colaborador',{colaborador:colaborador,salaoId:consts.salaoId});case 11:_yield$call2=_context2.sent;res=_yield$call2.data;_context2.next=15;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 15:if(!res.error){_context2.next=18;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context2.abrupt(\"return\",false);case 18:_context2.next=20;return put(allColaboradoresAction());case 20:_context2.next=22;return put(updateColaborador({components:_objectSpread(_objectSpread({},components),{},{drawer:false})}));case 22:_context2.next=24;return put(resetColaborador());case 24:notification('success',{placement:'topStart',title:'Feitoooo!!',description:'Colaborador salvo com sucesso!'});_context2.next=30;break;case 27:_context2.prev=27;_context2.t0=_context2[\"catch\"](0);notification('error',{placement:'topStart',title:'Ops...',description:_context2.t0.message});case 30:case\"end\":return _context2.stop();}}},_marked2,null,[[0,27]]);}export function allColaboradores(){var _yield$select3,form,_yield$call3,res;return _regeneratorRuntime.wrap(function allColaboradores$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return select(function(state){return state.colaborador;});case 2:_yield$select3=_context3.sent;form=_yield$select3.form;_context3.prev=4;_context3.next=7;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:true})}));case 7:_context3.next=9;return call(api.get,\"/colaborador/salao/609310a1002ab333d1ae1716\");case 9:_yield$call3=_context3.sent;res=_yield$call3.data;_context3.next=13;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 13:if(!res.error){_context3.next=16;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context3.abrupt(\"return\",false);case 16:_context3.next=18;return put(updateColaborador({colaboradores:res.colaboradores}));case 18:_context3.next=25;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](4);_context3.next=24;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 24:notification('error',{placement:'topStart',title:'Ops...',description:_context3.t0.message});case 25:case\"end\":return _context3.stop();}}},_marked3,null,[[4,20]]);}export function unlinkColaborador(_ref2){var payload,_yield$select4,form,components,colaborador,_yield$call4,res;return _regeneratorRuntime.wrap(function unlinkColaborador$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:payload=_ref2.payload;_context4.next=3;return select(function(state){return state.colaborador;});case 3:_yield$select4=_context4.sent;form=_yield$select4.form;components=_yield$select4.components;colaborador=_yield$select4.colaborador;_context4.prev=7;_context4.next=10;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 10:_context4.next=12;return call(api.delete,\"/colaborador/vinculo/\".concat(colaborador.vinculoId));case 12:_yield$call4=_context4.sent;res=_yield$call4.data;_context4.next=16;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 16:if(!res.error){_context4.next=19;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context4.abrupt(\"return\",false);case 19:notification('success',{placement:'topStart',title:'Tudo certo',description:'O cliente foi desvinculado com sucesso!'});_context4.next=22;return put(allColaboradoresAction());case 22:_context4.next=24;return put(updateColaborador({components:_objectSpread(_objectSpread({},components),{},{drawer:false,confirmDelete:false})}));case 24:_context4.next=31;break;case 26:_context4.prev=26;_context4.t0=_context4[\"catch\"](7);_context4.next=30;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 30:notification('error',{placement:'topStart',title:'Ops...',description:_context4.t0.message});case 31:case\"end\":return _context4.stop();}}},_marked4,null,[[7,26]]);}export function allServicos(){var _yield$select5,form,_yield$call5,res;return _regeneratorRuntime.wrap(function allServicos$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return select(function(state){return state.colaborador;});case 2:_yield$select5=_context5.sent;form=_yield$select5.form;_context5.prev=4;_context5.next=7;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:true})}));case 7:_context5.next=9;return call(api.get,\"/salao/servicos/609310a1002ab333d1ae1716\");case 9:_yield$call5=_context5.sent;res=_yield$call5.data;_context5.next=13;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 13:console.log(res);if(!res.error){_context5.next=17;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context5.abrupt(\"return\",false);case 17:_context5.next=19;return put(updateColaborador({servicos:res.servicos}));case 19:_context5.next=26;break;case 21:_context5.prev=21;_context5.t0=_context5[\"catch\"](4);_context5.next=25;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 25:notification('error',{placement:'topStart',title:'Ops...',description:_context5.t0.message});case 26:case\"end\":return _context5.stop();}}},_marked5,null,[[4,21]]);}export function saveColaborador(){var _yield$select6,colaborador,form,components,vinculo,vinculoId,especialidades,_yield$call6,res;return _regeneratorRuntime.wrap(function saveColaborador$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return select(function(state){return state.colaborador;});case 2:_yield$select6=_context6.sent;colaborador=_yield$select6.colaborador;form=_yield$select6.form;components=_yield$select6.components;_context6.prev=6;_context6.next=9;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 9:vinculo=colaborador.vinculo,vinculoId=colaborador.vinculoId,especialidades=colaborador.especialidades;_context6.next=12;return call(api.put,\"/colaborador/\".concat(colaborador._id),{vinculo:vinculo,vinculoId:vinculoId,especialidades:especialidades});case 12:_yield$call6=_context6.sent;res=_yield$call6.data;_context6.next=16;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 16:if(!res.error){_context6.next=19;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context6.abrupt(\"return\",false);case 19:_context6.next=21;return put(allColaboradoresAction());case 21:_context6.next=23;return put(updateColaborador({components:_objectSpread(_objectSpread({},components),{},{drawer:false})}));case 23:_context6.next=25;return put(resetColaborador());case 25:_context6.next=32;break;case 27:_context6.prev=27;_context6.t0=_context6[\"catch\"](6);_context6.next=31;return put(updateColaborador({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 31:notification('error',{placement:'topStart',title:'Ops...',description:_context6.t0.message});case 32:case\"end\":return _context6.stop();}}},_marked6,null,[[6,27]]);}export default all([takeLatest(types.ADD_COLABORADOR,addColaborador),takeLatest(types.FILTER_COLABORADOR,filterColaborador),takeLatest(types.ALL_COLABORADORES,allColaboradores),takeLatest(types.UNLINK_COLABORADOR,unlinkColaborador),takeLatest(types.ALL_SERVICOS,allServicos),takeLatest(types.SAVE_COLABORADOR,saveColaborador)]);","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/store/modules/colaborador/sagas.js"],"names":["filterColaborador","addColaborador","allColaboradores","unlinkColaborador","allServicos","saveColaborador","takeLatest","all","call","put","select","updateColaborador","resetColaborador","allColaboradoresAction","types","api","notification","consts","filters","state","colaborador","form","filtering","post","res","data","error","placement","title","description","message","colaboradores","length","disabled","console","log","components","saving","salaoId","drawer","get","payload","delete","vinculoId","confirmDelete","servicos","vinculo","especialidades","_id","ADD_COLABORADOR","FILTER_COLABORADOR","ALL_COLABORADORES","UNLINK_COLABORADOR","ALL_SERVICOS","SAVE_COLABORADOR"],"mappings":"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","sourcesContent":["import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport {\n  updateColaborador,\n  resetColaborador,\n  allColaboradores as allColaboradoresAction,\n} from './actions';\nimport types from './types';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\nimport consts from '../../../consts';\n\nexport function* filterColaborador({ filters }) {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(api.post, '/colaborador/filter', filters);\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    if (res.colaboradores.length > 0) {\n      yield put(\n        updateColaborador({\n          colaborador: res.colaboradores[0],\n          form: { ...form, filtering: false, disabled: true },\n        })\n      );\n    } else {\n      yield put(\n        updateColaborador({\n          form: { ...form, filtering: false, disabled: false },\n        })\n      );\n    }\n\n    console.log(res.colaboradores);\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* addColaborador() {\n  try {\n    const { colaborador, form, components } = yield select(\n      (state) => state.colaborador\n    );\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.post, '/colaborador', {\n      colaborador,\n      salaoId: consts.salaoId,\n    });\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({ components: { ...components, drawer: false } })\n    );\n    yield put(resetColaborador());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Colaborador salvo com sucesso!',\n    });\n  } catch (err) {\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allColaboradores() {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/colaborador/salao/609310a1002ab333d1ae1716`\n    );\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({ colaboradores: res.colaboradores }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* unlinkColaborador({ payload }) {\n  const { form, components, colaborador } = yield select(\n    (state) => state.colaborador\n  );\n\n  try {\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(\n      api.delete,\n      `/colaborador/vinculo/${colaborador.vinculoId}`\n    );\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Tudo certo',\n      description: 'O cliente foi desvinculado com sucesso!',\n    });\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({\n        components: { ...components, drawer: false, confirmDelete: false },\n      })\n    );\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allServicos() {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/salao/servicos/609310a1002ab333d1ae1716`\n    );\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    console.log(res);\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({ servicos: res.servicos }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* saveColaborador() {\n  const { colaborador, form, components } = yield select(\n    (state) => state.colaborador\n  );\n\n  try {\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n    const { vinculo, vinculoId, especialidades } = colaborador;\n\n    const { data: res } = yield call(\n      api.put,\n      `/colaborador/${colaborador._id}`,\n      { vinculo, vinculoId, especialidades }\n    );\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({ components: { ...components, drawer: false } })\n    );\n    yield put(resetColaborador());\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport default all([\n  takeLatest(types.ADD_COLABORADOR, addColaborador),\n  takeLatest(types.FILTER_COLABORADOR, filterColaborador),\n  takeLatest(types.ALL_COLABORADORES, allColaboradores),\n  takeLatest(types.UNLINK_COLABORADOR, unlinkColaborador),\n  takeLatest(types.ALL_SERVICOS, allServicos),\n  takeLatest(types.SAVE_COLABORADOR, saveColaborador),\n]);\n"]},"metadata":{},"sourceType":"module"}