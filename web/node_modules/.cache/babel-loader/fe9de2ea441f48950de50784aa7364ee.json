{"ast":null,"code":"import _defineProperty from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Calendar,momentLocalizer}from'react-big-calendar';import moment from'moment';import'moment/locale/pt-br';import'react-big-calendar/lib/css/react-big-calendar.css';import{TagPicker,Drawer,Modal,Icon,Checkbox,DatePicker,Button,Notification}from'rsuite';import'rsuite/dist/styles/rsuite-default.css';import{allHorarios,addHorario,removeHorario,updateHorario,allServicos,filterColaboradores,saveHorario}from'../../store/modules/horario/actions';import util from'../../services/util';import colors from'../../data/colors.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";moment.locale('pt-br');var localizer=momentLocalizer(moment);var HorariosAtendimento=function HorariosAtendimento(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.horario;}),horario=_useSelector.horario,horarios=_useSelector.horarios,form=_useSelector.form,components=_useSelector.components,behavior=_useSelector.behavior,servicos=_useSelector.servicos,colaboradores=_useSelector.colaboradores;var diasDaSemana=['domingo','segunda-feira','terça-feira','quarta-feira','quinta-feira','sexta-feira','sábado'];var diasSemanaData=[new Date(2021,3,11,0,0,0,0),new Date(2021,3,12,0,0,0,0),new Date(2021,3,13,0,0,0,0),new Date(2021,3,14,0,0,0,0),new Date(2021,3,15,0,0,0,0),new Date(2021,3,16,0,0,0,0),new Date(2021,3,17,0,0,0,0)];var setHorario=function setHorario(key,value){dispatch(updateHorario({horario:_objectSpread(_objectSpread({},horario),{},_defineProperty({},key,value))}));};var setComponents=function setComponents(component,state){dispatch(updateHorario({components:_objectSpread(_objectSpread({},components),{},_defineProperty({},component,state))}));};var onHorarioClick=function onHorarioClick(horario){dispatch(updateHorario({horario:horario,behavior:'update'}));setComponents('drawer',true);};var save=function save(){if(!util.allFields(horario,['dias','inicio','fim','especialidades','colaboradores'])){// DISPARAR O ALERTA\nNotification.error({placement:'topStart',title:'Calma lá!',description:'Antes de prosseguir, preencha todos os campos!'});return false;}if(behavior==='create'){dispatch(addHorario());}else{dispatch(saveHorario());}};var remove=function remove(){// PERFORM REMOVE\ndispatch(removeHorario());};var formatEventos=function formatEventos(){var listaEventos=[];horarios.map(function(hor,index){hor.dias.map(function(dia){listaEventos.push({resource:{horario:hor,backgroundColor:colors[index]},title:\"\".concat(hor.especialidades.length,\" espec. e \").concat(hor.colaboradores.length,\" colab. dispon\\xEDveis\"),start:new Date(diasSemanaData[dia].setHours(parseInt(moment(hor.inicio).format('HH')),parseInt(moment(hor.inicio).format('mm')))),end:new Date(diasSemanaData[dia].setHours(parseInt(moment(hor.fim).format('HH')),parseInt(moment(hor.fim).format('mm'))))});});});return listaEventos;};useEffect(function(){dispatch(allHorarios());dispatch(allServicos());},[]);useEffect(function(){dispatch(filterColaboradores());},[horario.especialidades]);return/*#__PURE__*/_jsxs(\"div\",{className:\"col p-5 overflow-auto h-100\",children:[/*#__PURE__*/_jsx(Drawer,{show:components.drawer,size:\"sm\",onHide:function onHide(){return setComponents('drawer',false);},children:/*#__PURE__*/_jsxs(Drawer.Body,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Criar novo horario de atendimento\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Dias da semana\"}),/*#__PURE__*/_jsx(TagPicker,{size:\"lg\",block:true,value:horario.dias,data:diasDaSemana.map(function(label,value){return{label:label,value:value};}),onChange:function onChange(value){setHorario('dias',value);}}),/*#__PURE__*/_jsxs(Checkbox,{disabled:horario.dias.length===diasDaSemana.length,checked:horario.dias.length===diasDaSemana.length,onChange:function onChange(v,selected){if(selected){setHorario('dias',diasDaSemana.map(function(label,value){return value;}));}else{setHorario('dias',[]);}},children:[' ',\"Selecionar Todos\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 mt-3\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"d-block\",children:\"Hor\\xE1rio Inicial\"}),/*#__PURE__*/_jsx(DatePicker,{block:true,format:\"HH:mm\",hideMinutes:function hideMinutes(min){return![0,30].includes(min);},value:horario.inicio,onChange:function onChange(e){setHorario('inicio',e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 mt-3\",children:[/*#__PURE__*/_jsx(\"b\",{className:\"d-block\",children:\"Hor\\xE1rio Final\"}),/*#__PURE__*/_jsx(DatePicker,{block:true,format:\"HH:mm\",hideMinutes:function hideMinutes(min){return![0,30].includes(min);},value:horario.fim,onChange:function onChange(e){setHorario('fim',e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 mt-3\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Especialidades dispon\\xEDveis\"}),/*#__PURE__*/_jsx(TagPicker,{size:\"lg\",block:true,data:servicos,value:horario.especialidades,onChange:function onChange(e){setHorario('especialidades',e);}}),/*#__PURE__*/_jsxs(Checkbox,{disabled:horario.especialidades.length===servicos.length,checked:horario.especialidades.length===servicos.length,onChange:function onChange(v,selected){if(selected){setHorario('especialidades',servicos.map(function(s){return s.value;}));}else{setHorario('especialidades',[]);}},children:[' ',\"Selecionar Todas\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 mt-3\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Colaboradores dispon\\xEDveis\"}),/*#__PURE__*/_jsx(TagPicker,{size:\"lg\",block:true,data:colaboradores,disabled:horario.especialidades.length===0,value:horario.colaboradores,onChange:function onChange(e){setHorario('colaboradores',e);}}),/*#__PURE__*/_jsxs(Checkbox,{disabled:horario.colaboradores.length===colaboradores.length,checked:horario.colaboradores.length===colaboradores.length,onChange:function onChange(v,selected){if(selected){setHorario('colaboradores',colaboradores.map(function(s){return s.value;}));}else{setHorario('colaboradores',[]);}},children:[' ',\"Selecionar Todos\"]})]})]}),/*#__PURE__*/_jsx(Button,{loading:form.saving,color:behavior==='create'?'green':'primary',size:\"lg\",block:true,onClick:function onClick(){return save();},className:\"mt-3\",children:\"Salvar Hor\\xE1rio de Atendimento\"}),behavior==='update'&&/*#__PURE__*/_jsx(Button,{loading:form.saving,color:\"red\",size:\"lg\",block:true,onClick:function onClick(){return setComponents('confirmDelete',true);},className:\"mt-1\",children:\"Remover Hor\\xE1rio de Atendimento\"})]})}),/*#__PURE__*/_jsxs(Modal,{show:components.confirmDelete,onHide:function onHide(){return setComponents('confirmDelete',false);},size:\"xs\",children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Icon,{icon:\"remind\",style:{color:'#ffb300',fontSize:24}}),'  ',\" Tem certeza que deseja excluir? Essa a\\xE7\\xE3o ser\\xE1 irrevers\\xEDvel!\"]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{loading:form.saving,onClick:function onClick(){return remove();},color:\"red\",children:\"Sim, tenho certeza!\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setComponents('confirmDelete',false);},appearance:\"subtle\",children:\"Cancelar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4 mt-0\",children:\"Horarios de Atendimento\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setComponents('drawer',true);},className:\"btn btn-primary btn-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mdi mdi-plus\"}),\" Novo Horario\"]})})]}),/*#__PURE__*/_jsx(Calendar,{localizer:localizer,onSelectEvent:function onSelectEvent(e){var horario=e.resource.horario;onHorarioClick(horario);},onSelectSlot:function onSelectSlot(slotInfo){var start=slotInfo.start,end=slotInfo.end;dispatch(updateHorario({horario:_objectSpread(_objectSpread({},horario),{},{dias:[moment(start).day()],inicio:start,fim:end})}));setComponents('drawer',true);},formats:{dateFormat:'dd',dayFormat:function dayFormat(date,culture,localizer){return localizer.format(date,'dddd',culture);}},events:formatEventos(),eventPropGetter:function eventPropGetter(event,start,end,isSelected){return{style:{backgroundColor:event.resource.backgroundColor,borderColor:event.resource.backgroundColor}};},date:diasSemanaData[moment().day()],view:components.view,selectable:true,popup:true,toolbar:false,style:{height:600}})]})})]});};export default HorariosAtendimento;","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/pages/HorariosAtendimento/index.js"],"names":["useEffect","useDispatch","useSelector","Calendar","momentLocalizer","moment","TagPicker","Drawer","Modal","Icon","Checkbox","DatePicker","Button","Notification","allHorarios","addHorario","removeHorario","updateHorario","allServicos","filterColaboradores","saveHorario","util","colors","locale","localizer","HorariosAtendimento","dispatch","state","horario","horarios","form","components","behavior","servicos","colaboradores","diasDaSemana","diasSemanaData","Date","setHorario","key","value","setComponents","component","onHorarioClick","save","allFields","error","placement","title","description","remove","formatEventos","listaEventos","map","hor","index","dias","dia","push","resource","backgroundColor","especialidades","length","start","setHours","parseInt","inicio","format","end","fim","drawer","label","v","selected","min","includes","e","s","saving","confirmDelete","color","fontSize","slotInfo","day","dateFormat","dayFormat","date","culture","event","isSelected","style","borderColor","view","height"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport 'moment/locale/pt-br';\n\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport {\n  TagPicker,\n  Drawer,\n  Modal,\n  Icon,\n  Checkbox,\n  DatePicker,\n  Button,\n  Notification,\n} from 'rsuite';\nimport 'rsuite/dist/styles/rsuite-default.css';\n\nimport {\n  allHorarios,\n  addHorario,\n  removeHorario,\n  updateHorario,\n  allServicos,\n  filterColaboradores,\n  saveHorario,\n} from '../../store/modules/horario/actions';\nimport util from '../../services/util';\nimport colors from '../../data/colors.json';\n\nmoment.locale('pt-br');\nconst localizer = momentLocalizer(moment);\n\nconst HorariosAtendimento = () => {\n  const dispatch = useDispatch();\n  const {\n    horario,\n    horarios,\n    form,\n    components,\n    behavior,\n    servicos,\n    colaboradores,\n  } = useSelector((state) => state.horario);\n\n  const diasDaSemana = [\n    'domingo',\n    'segunda-feira',\n    'terça-feira',\n    'quarta-feira',\n    'quinta-feira',\n    'sexta-feira',\n    'sábado',\n  ];\n\n  const diasSemanaData = [\n    new Date(2021, 3, 11, 0, 0, 0, 0),\n    new Date(2021, 3, 12, 0, 0, 0, 0),\n    new Date(2021, 3, 13, 0, 0, 0, 0),\n    new Date(2021, 3, 14, 0, 0, 0, 0),\n    new Date(2021, 3, 15, 0, 0, 0, 0),\n    new Date(2021, 3, 16, 0, 0, 0, 0),\n    new Date(2021, 3, 17, 0, 0, 0, 0),\n  ];\n\n  const setHorario = (key, value) => {\n    dispatch(\n      updateHorario({\n        horario: { ...horario, [key]: value },\n      })\n    );\n  };\n\n  const setComponents = (component, state) => {\n    dispatch(\n      updateHorario({\n        components: { ...components, [component]: state },\n      })\n    );\n  };\n\n  const onHorarioClick = (horario) => {\n    dispatch(\n      updateHorario({\n        horario,\n        behavior: 'update',\n      })\n    );\n    setComponents('drawer', true);\n  };\n\n  const save = () => {\n    if (\n      !util.allFields(horario, [\n        'dias',\n        'inicio',\n        'fim',\n        'especialidades',\n        'colaboradores',\n      ])\n    ) {\n      // DISPARAR O ALERTA\n      Notification.error({\n        placement: 'topStart',\n        title: 'Calma lá!',\n        description: 'Antes de prosseguir, preencha todos os campos!',\n      });\n      return false;\n    }\n\n    if (behavior === 'create') {\n      dispatch(addHorario());\n    } else {\n      dispatch(saveHorario());\n    }\n  };\n\n  const remove = () => {\n    // PERFORM REMOVE\n    dispatch(removeHorario());\n  };\n\n  const formatEventos = () => {\n    let listaEventos = [];\n\n    horarios.map((hor, index) => {\n      hor.dias.map((dia) => {\n        listaEventos.push({\n          resource: { horario: hor, backgroundColor: colors[index] },\n          title: `${hor.especialidades.length} espec. e ${hor.colaboradores.length} colab. disponíveis`,\n          start: new Date(\n            diasSemanaData[dia].setHours(\n              parseInt(moment(hor.inicio).format('HH')),\n              parseInt(moment(hor.inicio).format('mm'))\n            )\n          ),\n          end: new Date(\n            diasSemanaData[dia].setHours(\n              parseInt(moment(hor.fim).format('HH')),\n              parseInt(moment(hor.fim).format('mm'))\n            )\n          ),\n        });\n      });\n    });\n\n    return listaEventos;\n  };\n\n  useEffect(() => {\n    dispatch(allHorarios());\n    dispatch(allServicos());\n  }, []);\n\n  useEffect(() => {\n    dispatch(filterColaboradores());\n  }, [horario.especialidades]);\n\n  return (\n    <div className=\"col p-5 overflow-auto h-100\">\n      <Drawer\n        show={components.drawer}\n        size=\"sm\"\n        onHide={() => setComponents('drawer', false)}\n      >\n        <Drawer.Body>\n          <h3>Criar novo horario de atendimento</h3>\n          <div className=\"row mt-3\">\n            <div className=\"col-12\">\n              <b>Dias da semana</b>\n              <TagPicker\n                size=\"lg\"\n                block\n                value={horario.dias}\n                data={diasDaSemana.map((label, value) => ({ label, value }))}\n                onChange={(value) => {\n                  setHorario('dias', value);\n                }}\n              />\n              <Checkbox\n                disabled={horario.dias.length === diasDaSemana.length}\n                checked={horario.dias.length === diasDaSemana.length}\n                onChange={(v, selected) => {\n                  if (selected) {\n                    setHorario(\n                      'dias',\n                      diasDaSemana.map((label, value) => value)\n                    );\n                  } else {\n                    setHorario('dias', []);\n                  }\n                }}\n              >\n                {' '}\n                Selecionar Todos\n              </Checkbox>\n            </div>\n            <div className=\"col-6 mt-3\">\n              <b className=\"d-block\">Horário Inicial</b>\n              <DatePicker\n                block\n                format=\"HH:mm\"\n                hideMinutes={(min) => ![0, 30].includes(min)}\n                value={horario.inicio}\n                onChange={(e) => {\n                  setHorario('inicio', e);\n                }}\n              />\n            </div>\n            <div className=\"col-6 mt-3\">\n              <b className=\"d-block\">Horário Final</b>\n              <DatePicker\n                block\n                format=\"HH:mm\"\n                hideMinutes={(min) => ![0, 30].includes(min)}\n                value={horario.fim}\n                onChange={(e) => {\n                  setHorario('fim', e);\n                }}\n              />\n            </div>\n            <div className=\"col-12 mt-3\">\n              <b>Especialidades disponíveis</b>\n              <TagPicker\n                size=\"lg\"\n                block\n                data={servicos}\n                value={horario.especialidades}\n                onChange={(e) => {\n                  setHorario('especialidades', e);\n                }}\n              />\n              <Checkbox\n                disabled={horario.especialidades.length === servicos.length}\n                checked={horario.especialidades.length === servicos.length}\n                onChange={(v, selected) => {\n                  if (selected) {\n                    setHorario(\n                      'especialidades',\n                      servicos.map((s) => s.value)\n                    );\n                  } else {\n                    setHorario('especialidades', []);\n                  }\n                }}\n              >\n                {' '}\n                Selecionar Todas\n              </Checkbox>\n            </div>\n            <div className=\"col-12 mt-3\">\n              <b>Colaboradores disponíveis</b>\n              <TagPicker\n                size=\"lg\"\n                block\n                data={colaboradores}\n                disabled={horario.especialidades.length === 0}\n                value={horario.colaboradores}\n                onChange={(e) => {\n                  setHorario('colaboradores', e);\n                }}\n              />\n              <Checkbox\n                disabled={horario.colaboradores.length === colaboradores.length}\n                checked={horario.colaboradores.length === colaboradores.length}\n                onChange={(v, selected) => {\n                  if (selected) {\n                    setHorario(\n                      'colaboradores',\n                      colaboradores.map((s) => s.value)\n                    );\n                  } else {\n                    setHorario('colaboradores', []);\n                  }\n                }}\n              >\n                {' '}\n                Selecionar Todos\n              </Checkbox>\n            </div>\n          </div>\n          <Button\n            loading={form.saving}\n            color={behavior === 'create' ? 'green' : 'primary'}\n            size=\"lg\"\n            block\n            onClick={() => save()}\n            className=\"mt-3\"\n          >\n            Salvar Horário de Atendimento\n          </Button>\n          {behavior === 'update' && (\n            <Button\n              loading={form.saving}\n              color=\"red\"\n              size=\"lg\"\n              block\n              onClick={() => setComponents('confirmDelete', true)}\n              className=\"mt-1\"\n            >\n              Remover Horário de Atendimento\n            </Button>\n          )}\n        </Drawer.Body>\n      </Drawer>\n\n      <Modal\n        show={components.confirmDelete}\n        onHide={() => setComponents('confirmDelete', false)}\n        size=\"xs\"\n      >\n        <Modal.Body>\n          <Icon\n            icon=\"remind\"\n            style={{\n              color: '#ffb300',\n              fontSize: 24,\n            }}\n          />\n          {'  '} Tem certeza que deseja excluir? Essa ação será irreversível!\n        </Modal.Body>\n        <Modal.Footer>\n          <Button loading={form.saving} onClick={() => remove()} color=\"red\">\n            Sim, tenho certeza!\n          </Button>\n          <Button\n            onClick={() => setComponents('confirmDelete', false)}\n            appearance=\"subtle\"\n          >\n            Cancelar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"w-100 d-flex justify-content-between\">\n            <h2 className=\"mb-4 mt-0\">Horarios de Atendimento</h2>\n            <div>\n              <button\n                onClick={() => setComponents('drawer', true)}\n                className=\"btn btn-primary btn-lg\"\n              >\n                <span className=\"mdi mdi-plus\"></span> Novo Horario\n              </button>\n            </div>\n          </div>\n\n          <Calendar\n            localizer={localizer}\n            onSelectEvent={(e) => {\n              const { horario } = e.resource;\n              onHorarioClick(horario);\n            }}\n            onSelectSlot={(slotInfo) => {\n              const { start, end } = slotInfo;\n              dispatch(\n                updateHorario({\n                  horario: {\n                    ...horario,\n                    dias: [moment(start).day()],\n                    inicio: start,\n                    fim: end,\n                  },\n                })\n              );\n              setComponents('drawer', true);\n            }}\n            formats={{\n              dateFormat: 'dd',\n              dayFormat: (date, culture, localizer) =>\n                localizer.format(date, 'dddd', culture),\n            }}\n            events={formatEventos()}\n            eventPropGetter={(event, start, end, isSelected) => {\n              return {\n                style: {\n                  backgroundColor: event.resource.backgroundColor,\n                  borderColor: event.resource.backgroundColor,\n                },\n              };\n            }}\n            date={diasSemanaData[moment().day()]}\n            view={components.view}\n            selectable={true}\n            popup={true}\n            toolbar={false}\n            style={{ height: 600 }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HorariosAtendimento;\n"]},"metadata":{},"sourceType":"module"}