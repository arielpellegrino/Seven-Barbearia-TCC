{"ast":null,"code":"import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport { updateColaborador, resetColaborador, allColaboradores as allColaboradoresAction } from './actions';\nimport types from './types';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\nimport consts from '../../../consts';\nexport function* filterColaborador({\n  filters\n}) {\n  const {\n    form\n  } = yield select(state => state.colaborador);\n\n  try {\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.post, '/colaborador/filter', filters);\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    if (res.colaboradores.length > 0) {\n      yield put(updateColaborador({\n        colaborador: res.colaboradores[0],\n        form: { ...form,\n          filtering: false,\n          disabled: true\n        }\n      }));\n    } else {\n      yield put(updateColaborador({\n        form: { ...form,\n          filtering: false,\n          disabled: false\n        }\n      }));\n    }\n\n    console.log(res.colaboradores);\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* addColaborador() {\n  try {\n    const {\n      colaborador,\n      form,\n      components\n    } = yield select(state => state.colaborador);\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.post, '/colaborador', {\n      colaborador,\n      salaoId: consts.salaoId\n    });\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(updateColaborador({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetColaborador());\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Colaborador salvo com sucesso!'\n    });\n  } catch (err) {\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* allColaboradores() {\n  const {\n    form\n  } = yield select(state => state.colaborador);\n\n  try {\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.get, `/colaborador/salao/609310a1002ab333d1ae1716`);\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({\n      colaboradores: res.colaboradores\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* unlinkColaborador({\n  payload\n}) {\n  const {\n    form,\n    components,\n    colaborador\n  } = yield select(state => state.colaborador);\n\n  try {\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.delete, `/colaborador/vinculo/${colaborador.vinculoId}`);\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Tudo certo',\n      description: 'O cliente foi desvinculado com sucesso!'\n    });\n    yield put(allColaboradoresAction());\n    yield put(updateColaborador({\n      components: { ...components,\n        drawer: false,\n        confirmDelete: false\n      }\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* allServicos() {\n  const {\n    form\n  } = yield select(state => state.colaborador);\n\n  try {\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: true\n      }\n    }));\n    const {\n      data: res\n    } = yield call(api.get, `/salao/servicos/609310a1002ab333d1ae1716`);\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    console.log(res);\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({\n      servicos: res.servicos\n    }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({\n      form: { ...form,\n        filtering: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport function* saveColaborador() {\n  const {\n    colaborador,\n    form,\n    components\n  } = yield select(state => state.colaborador);\n\n  try {\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: true\n      }\n    }));\n    const {\n      vinculo,\n      vinculoId,\n      especialidades\n    } = colaborador;\n    const {\n      data: res\n    } = yield call(api.put, `/colaborador/${colaborador._id}`, {\n      vinculo,\n      vinculoId,\n      especialidades\n    });\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: false\n      }\n    }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(updateColaborador({\n      components: { ...components,\n        drawer: false\n      }\n    }));\n    yield put(resetColaborador());\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({\n      form: { ...form,\n        saving: false\n      }\n    }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message\n    });\n  }\n}\nexport default all([takeLatest(types.ADD_COLABORADOR, addColaborador), takeLatest(types.FILTER_COLABORADOR, filterColaborador), takeLatest(types.ALL_COLABORADORES, allColaboradores), takeLatest(types.UNLINK_COLABORADOR, unlinkColaborador), takeLatest(types.ALL_SERVICOS, allServicos), takeLatest(types.SAVE_COLABORADOR, saveColaborador)]);","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/store/modules/colaborador/sagas.js"],"names":["takeLatest","all","call","put","select","updateColaborador","resetColaborador","allColaboradores","allColaboradoresAction","types","api","notification","consts","filterColaborador","filters","form","state","colaborador","filtering","data","res","post","error","placement","title","description","message","colaboradores","length","disabled","console","log","err","addColaborador","components","saving","salaoId","drawer","get","unlinkColaborador","payload","delete","vinculoId","confirmDelete","allServicos","servicos","saveColaborador","vinculo","especialidades","_id","ADD_COLABORADOR","FILTER_COLABORADOR","ALL_COLABORADORES","UNLINK_COLABORADOR","ALL_SERVICOS","SAVE_COLABORADOR"],"mappings":"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","sourcesContent":["import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport {\n  updateColaborador,\n  resetColaborador,\n  allColaboradores as allColaboradoresAction,\n} from './actions';\nimport types from './types';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\nimport consts from '../../../consts';\n\nexport function* filterColaborador({ filters }) {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(api.post, '/colaborador/filter', filters);\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    if (res.colaboradores.length > 0) {\n      yield put(\n        updateColaborador({\n          colaborador: res.colaboradores[0],\n          form: { ...form, filtering: false, disabled: true },\n        })\n      );\n    } else {\n      yield put(\n        updateColaborador({\n          form: { ...form, filtering: false, disabled: false },\n        })\n      );\n    }\n\n    console.log(res.colaboradores);\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* addColaborador() {\n  try {\n    const { colaborador, form, components } = yield select(\n      (state) => state.colaborador\n    );\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.post, '/colaborador', {\n      colaborador,\n      salaoId: consts.salaoId,\n    });\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({ components: { ...components, drawer: false } })\n    );\n    yield put(resetColaborador());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Colaborador salvo com sucesso!',\n    });\n  } catch (err) {\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allColaboradores() {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/colaborador/salao/609310a1002ab333d1ae1716`\n    );\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({ colaboradores: res.colaboradores }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* unlinkColaborador({ payload }) {\n  const { form, components, colaborador } = yield select(\n    (state) => state.colaborador\n  );\n\n  try {\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(\n      api.delete,\n      `/colaborador/vinculo/${colaborador.vinculoId}`\n    );\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Tudo certo',\n      description: 'O cliente foi desvinculado com sucesso!',\n    });\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({\n        components: { ...components, drawer: false, confirmDelete: false },\n      })\n    );\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allServicos() {\n  const { form } = yield select((state) => state.colaborador);\n\n  try {\n    yield put(updateColaborador({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/salao/servicos/609310a1002ab333d1ae1716`\n    );\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n\n    console.log(res);\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateColaborador({ servicos: res.servicos }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* saveColaborador() {\n  const { colaborador, form, components } = yield select(\n    (state) => state.colaborador\n  );\n\n  try {\n    yield put(updateColaborador({ form: { ...form, saving: true } }));\n    const { vinculo, vinculoId, especialidades } = colaborador;\n\n    const { data: res } = yield call(\n      api.put,\n      `/colaborador/${colaborador._id}`,\n      { vinculo, vinculoId, especialidades }\n    );\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allColaboradoresAction());\n    yield put(\n      updateColaborador({ components: { ...components, drawer: false } })\n    );\n    yield put(resetColaborador());\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateColaborador({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport default all([\n  takeLatest(types.ADD_COLABORADOR, addColaborador),\n  takeLatest(types.FILTER_COLABORADOR, filterColaborador),\n  takeLatest(types.ALL_COLABORADORES, allColaboradores),\n  takeLatest(types.UNLINK_COLABORADOR, unlinkColaborador),\n  takeLatest(types.ALL_SERVICOS, allServicos),\n  takeLatest(types.SAVE_COLABORADOR, saveColaborador),\n]);\n"]},"metadata":{},"sourceType":"module"}