{"ast":null,"code":"import _regeneratorRuntime from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(addServico),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(allServicos),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(removeArquivo),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(saveServico),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(removeServico);import{takeLatest,all,call,put,select}from'redux-saga/effects';import types from'./types';import{updateServico,resetServico,allServicos as allServicosAction}from'./actions';import api from'../../../services/api';import{notification}from'../../../services/rsuite';import consts from'../../../consts';export function addServico(){var _yield$select,servico,form,components,formData,_yield$call,res;return _regeneratorRuntime.wrap(function addServico$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return select(function(state){return state.servico;});case 2:_yield$select=_context.sent;servico=_yield$select.servico;form=_yield$select.form;components=_yield$select.components;_context.prev=6;_context.next=9;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 9:formData=new FormData();formData.append('servico',JSON.stringify(servico));formData.append('salaoId',consts.salaoId);servico.arquivos.map(function(a,i){formData.append(\"arquivo_\".concat(i),a);});_context.next=15;return call(api.post,'/servico',formData);case 15:_yield$call=_context.sent;res=_yield$call.data;_context.next=19;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 19:if(!res.error){_context.next=22;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context.abrupt(\"return\",false);case 22:_context.next=24;return put(allServicosAction());case 24:_context.next=26;return put(updateServico({components:_objectSpread(_objectSpread({},components),{},{drawer:false})}));case 26:_context.next=28;return put(resetServico());case 28:notification('success',{placement:'topStart',title:'Feitoooo!!',description:'Serviço salvo com sucesso!'});_context.next=36;break;case 31:_context.prev=31;_context.t0=_context[\"catch\"](6);_context.next=35;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 35:notification('error',{placement:'topStart',title:'Ops...',description:_context.t0.message});case 36:case\"end\":return _context.stop();}}},_marked,null,[[6,31]]);}export function allServicos(){var _yield$select2,form,_yield$call2,res;return _regeneratorRuntime.wrap(function allServicos$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return select(function(state){return state.servico;});case 2:_yield$select2=_context2.sent;form=_yield$select2.form;_context2.prev=4;_context2.next=7;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{filtering:true})}));case 7:_context2.next=9;return call(api.get,\"/servico/salao/609310a1002ab333d1ae1716\");case 9:_yield$call2=_context2.sent;res=_yield$call2.data;_context2.next=13;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 13:if(!res.error){_context2.next=16;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context2.abrupt(\"return\",false);case 16:_context2.next=18;return put(updateServico({servicos:res.servicos}));case 18:_context2.next=25;break;case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](4);_context2.next=24;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{filtering:false})}));case 24:notification('error',{placement:'topStart',title:'Ops...',description:_context2.t0.message});case 25:case\"end\":return _context2.stop();}}},_marked2,null,[[4,20]]);}export function removeArquivo(payload){var _yield$select3,form,_yield$call3,res;return _regeneratorRuntime.wrap(function removeArquivo$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return select(function(state){return state.servico;});case 2:_yield$select3=_context3.sent;form=_yield$select3.form;_context3.prev=4;_context3.next=7;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 7:_context3.next=9;return call(api.post,\"/servico/remove-arquivo/\",{arquivo:payload.arquivo});case 9:_yield$call3=_context3.sent;res=_yield$call3.data;_context3.next=13;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 13:if(!res.error){_context3.next=16;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context3.abrupt(\"return\",false);case 16:_context3.next=23;break;case 18:_context3.prev=18;_context3.t0=_context3[\"catch\"](4);_context3.next=22;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 22:notification('error',{placement:'topStart',title:'Ops...',description:_context3.t0.message});case 23:case\"end\":return _context3.stop();}}},_marked3,null,[[4,18]]);}export function saveServico(){var _yield$select4,servico,form,components,formData,_yield$call4,res;return _regeneratorRuntime.wrap(function saveServico$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return select(function(state){return state.servico;});case 2:_yield$select4=_context4.sent;servico=_yield$select4.servico;form=_yield$select4.form;components=_yield$select4.components;_context4.prev=6;_context4.next=9;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 9:formData=new FormData();formData.append('servico',JSON.stringify(servico));formData.append('salaoId',consts.salaoId);servico.arquivos.map(function(a,i){formData.append(\"arquivo_\".concat(i),a);});_context4.next=15;return call(api.put,\"/servico/\".concat(servico._id),formData);case 15:_yield$call4=_context4.sent;res=_yield$call4.data;_context4.next=19;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 19:if(!res.error){_context4.next=22;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context4.abrupt(\"return\",false);case 22:_context4.next=24;return put(allServicosAction());case 24:_context4.next=26;return put(updateServico({components:_objectSpread(_objectSpread({},components),{},{drawer:false})}));case 26:_context4.next=28;return put(resetServico());case 28:notification('success',{placement:'topStart',title:'Feitoooo!!',description:'Serviço salvo com sucesso!'});_context4.next=36;break;case 31:_context4.prev=31;_context4.t0=_context4[\"catch\"](6);_context4.next=35;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 35:notification('error',{placement:'topStart',title:'Ops...',description:_context4.t0.message});case 36:case\"end\":return _context4.stop();}}},_marked4,null,[[6,31]]);}export function removeServico(){var _yield$select5,servico,form,components,_yield$call5,res;return _regeneratorRuntime.wrap(function removeServico$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return select(function(state){return state.servico;});case 2:_yield$select5=_context5.sent;servico=_yield$select5.servico;form=_yield$select5.form;components=_yield$select5.components;_context5.prev=6;_context5.next=9;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:true})}));case 9:_context5.next=11;return call(api.delete,\"/servico/\".concat(servico._id));case 11:_yield$call5=_context5.sent;res=_yield$call5.data;_context5.next=15;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 15:if(!res.error){_context5.next=18;break;}// ALERT DO RSUITE\nnotification('error',{placement:'topStart',title:'Ops...',description:res.message});return _context5.abrupt(\"return\",false);case 18:_context5.next=20;return put(allServicosAction());case 20:_context5.next=22;return put(updateServico({components:_objectSpread(_objectSpread({},components),{},{drawer:false,confirmDelete:false})}));case 22:_context5.next=29;break;case 24:_context5.prev=24;_context5.t0=_context5[\"catch\"](6);_context5.next=28;return put(updateServico({form:_objectSpread(_objectSpread({},form),{},{saving:false})}));case 28:notification('error',{placement:'topStart',title:'Ops...',description:_context5.t0.message});case 29:case\"end\":return _context5.stop();}}},_marked5,null,[[6,24]]);}export default all([takeLatest(types.ADD_SERVICO,addServico),takeLatest(types.ALL_SERVICOS,allServicos),takeLatest(types.REMOVE_ARQUIVO,removeArquivo),takeLatest(types.SAVE_SERVICO,saveServico),takeLatest(types.REMOVE_SERVICO,removeServico)]);","map":{"version":3,"sources":["/home/arielpellegrino/Documentos/BBBBBBBB/SevenBarbearia/C/web/src/store/modules/servico/sagas.js"],"names":["addServico","allServicos","removeArquivo","saveServico","removeServico","takeLatest","all","call","put","select","types","updateServico","resetServico","allServicosAction","api","notification","consts","state","servico","form","components","saving","formData","FormData","append","JSON","stringify","salaoId","arquivos","map","a","i","post","res","data","error","placement","title","description","message","drawer","filtering","get","servicos","payload","arquivo","_id","delete","confirmDelete","ADD_SERVICO","ALL_SERVICOS","REMOVE_ARQUIVO","SAVE_SERVICO","REMOVE_SERVICO"],"mappings":"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","sourcesContent":["import { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport types from './types';\nimport {\n  updateServico,\n  resetServico,\n  allServicos as allServicosAction,\n} from './actions';\nimport api from '../../../services/api';\nimport { notification } from '../../../services/rsuite';\n\nimport consts from '../../../consts';\n\nexport function* addServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n\n    const { data: res } = yield call(api.post, '/servico', formData);\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({ components: { ...components, drawer: false } }));\n    yield put(resetServico());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!',\n    });\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* allServicos() {\n  const { form } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, filtering: true } }));\n\n    const { data: res } = yield call(\n      api.get,\n      `/servico/salao/609310a1002ab333d1ae1716`\n    );\n    yield put(updateServico({ form: { ...form, filtering: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(updateServico({ servicos: res.servicos }));\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({ form: { ...form, filtering: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* removeArquivo(payload) {\n  const { form } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n    const { data: res } = yield call(api.post, `/servico/remove-arquivo/`, {\n      arquivo: payload.arquivo,\n    });\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* saveServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const formData = new FormData();\n    formData.append('servico', JSON.stringify(servico));\n    formData.append('salaoId', consts.salaoId);\n    servico.arquivos.map((a, i) => {\n      formData.append(`arquivo_${i}`, a);\n    });\n\n    const { data: res } = yield call(\n      api.put,\n      `/servico/${servico._id}`,\n      formData\n    );\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(updateServico({ components: { ...components, drawer: false } }));\n    yield put(resetServico());\n\n    notification('success', {\n      placement: 'topStart',\n      title: 'Feitoooo!!',\n      description: 'Serviço salvo com sucesso!',\n    });\n  } catch (err) {\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport function* removeServico() {\n  const { servico, form, components } = yield select((state) => state.servico);\n\n  try {\n    yield put(updateServico({ form: { ...form, saving: true } }));\n\n    const { data: res } = yield call(api.delete, `/servico/${servico._id}`);\n    yield put(updateServico({ form: { ...form, saving: false } }));\n\n    if (res.error) {\n      // ALERT DO RSUITE\n      notification('error', {\n        placement: 'topStart',\n        title: 'Ops...',\n        description: res.message,\n      });\n      return false;\n    }\n\n    yield put(allServicosAction());\n    yield put(\n      updateServico({\n        components: { ...components, drawer: false, confirmDelete: false },\n      })\n    );\n  } catch (err) {\n    // COLOCAR AQUI O ALERT DO RSUITE\n    yield put(updateServico({ form: { ...form, saving: false } }));\n    notification('error', {\n      placement: 'topStart',\n      title: 'Ops...',\n      description: err.message,\n    });\n  }\n}\n\nexport default all([\n  takeLatest(types.ADD_SERVICO, addServico),\n  takeLatest(types.ALL_SERVICOS, allServicos),\n  takeLatest(types.REMOVE_ARQUIVO, removeArquivo),\n  takeLatest(types.SAVE_SERVICO, saveServico),\n  takeLatest(types.REMOVE_SERVICO, removeServico),\n]);\n"]},"metadata":{},"sourceType":"module"}